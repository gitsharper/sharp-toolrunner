<!DOCTYPE html>
<html lang="en">
  <head>
  <title>
		Markdown Converted to Html<title>
  </title>
  
  <style type="text/css">

  </style>
  
  </head>
	
	<body>
    <div>
		<h1 id="readme">Readme</h1>
<p>Sharp-ToolRunner (STR) is a Visual Studio add-in that allows you to transform one text file into another text file. An example would be to convert a &quot;.less&quot; file into a &quot;.css&quot; file, or translate a markdown (&quot;.md&quot;) file into an Html file to see what it is you&#39;re actually creating. STR does not perform these translations itself; the transformation is made by executing a program in the background each time the file is saved. For the &quot;.less&quot; file, &quot;lessc.cmd&quot; is run which executes the &quot;less&quot; compiler. In the case of the &quot;.md&quot; file, the &quot;marked&quot; translator is invoked, and the result gets a Html wrapper so it can be displayed.</p>
<p>Note that I am just using &quot;.less&quot;, and &quot;.md&quot; files as an example, you can run any application or script that has a command line interface that allows you to perform the actions you require. Normally want to take the input of the file you&#39;re editing in Visual Studio and pass it through a transformation, and then have Visual Studio save the result to a different file in your project. You can also run multiple commands against the source file, not all of which have to return output.</p>
<p>STR does not include the &quot;.less&quot;, &quot;.md&quot;, or any other translators/compilers within it&#39;s installer, those programs must already be installed and working properly on your system.</p>
<h3 id="before-i-move-on-">Before I move on ...</h3>
<p>Before I continue, there are other tools (see <a href="https://visualstudiogallery.msdn.microsoft.com/3b329021-cd7a-4a01-86fc-714c2d05bb6c">Web Compiler</a>) that have similar functionality to STR. It is not my intent for STR to compete with any of these fine tools. This is just a tool I wrote for myself and think that others might find it usefull.</p>
<h3 id="configutation-files">Configutation files</h3>
<p>STR works by reading a configuration file <strong>which you can easily extend to include your own tools</strong>. It processes target (input) files by looking up their extension, or file name. The configuration file is written in JSON which (might) make for easy editing.</p>
<pre><code class="lang-json">    {
        &quot;Id&quot;: &quot;.less&quot;,
        &quot;OutputExtension&quot;: &quot;.css&quot;,
        &quot;Commands&quot;: [
            {
                &quot;ExecutableName&quot;: &quot;cmd.exe&quot;,
                &quot;CmdLine&quot;: [ &quot;/C&quot;, &quot;lessc.cmd&quot;, &quot;-no-color&quot;, &quot;\&quot;$in\&quot;&quot;, &quot;\&quot;$out\&quot;&quot; ]
            }
        ]
    }
</code></pre>
<p>The entry above is for less and should be read something like this:</p>
<ul>
<li>For a file with the extension &quot;.less&quot;</li>
<li>Execute &quot;cmd.exe&quot;</li>
<li>With the command line: /C lessc.cmd -no-color &quot;input_file&quot; &quot;output_file&quot;</li>
<li>The extension returned to Visual Studio is &quot;.css&quot;</li>
</ul>
<p>Several things to note. </p>
<ul>
<li>$in and $out are markers to tell STR where to place the names of the input and output files on the command line.</li>
<li>If no output file is created by the tool being called (you should know this and not use the $out marker) STR will read stdin if  you have set &#39;&quot;ReadStdOut&quot;: true&#39; for the command.</li>
<li>The result of the translation is passed to Visual Studio which saves the final output file.</li>
</ul>
<h3 id="additonally">Additonally</h3>
<p>You can use file names in the &quot;Id&quot; member of a rule, this allows for configurations for specific files.</p>
<pre><code class="lang-json">    {
        &quot;Id&quot;: &quot;SpecialFile.less&quot;,
        &quot;OutputExtension&quot;: &quot;.xcss&quot;,
        &quot;Commands&quot;: [
            {
                &quot;ExecutableName&quot;: &quot;cmd.exe&quot;,
                &quot;CmdLine&quot;: [ &quot;/C&quot;, &quot;lessc.cmd&quot;, &quot;-no-color&quot;, &quot;\&quot;$in\&quot;&quot;, &quot;\&quot;$out\&quot;&quot; ]
            }
        ]
    }
</code></pre>
<p>For any files named &quot;SpecialFile.less&quot; STR would invoke the normal compilation for a &quot;.less&quot; file, but would pass the &quot;.xcss&quot; extension (rather than &quot;.css&quot;) back to Visual Studio.</p>
<p>There are several other &quot;tricks&quot;, and commands you can use which I will document later.</p>
<h3 id="configutation-file-location">Configutation file location</h3>
<p>You can have multiple configuration files, there locations can be:</p>
<ol>
<li>The directory in which the target file exits.</li>
<li>In the targets project directory.</li>
<li>In the directory of the solution that the project belongs to.</li>
<li>In the a subdirectory of the users &quot;Documents&quot; directory named &quot;Sharp-ToolRunner&quot;.</li>
<li>The directory in which STR is installed.</li>
</ol>
<p>The configuration files are read first to last creating a list of rules with the highest precendence being given to the rules &quot;closest&quot; to the target file. So, if you have a rule for &quot;.md&quot; in a configuration file in the target files directory it will be choosen instead of any rule defined in any other configuration file.</p>
<p>The name of the configutation file is always <strong>tool-runner.cfg.json</strong>.</p>
<h3 id="registering-sharp-toolrunner-as-a-custom-tool-for-your-files">Registering Sharp-ToolRunner as a Custom Tool for your files</h3>
<p>Before you can use STR you must associate it as a &quot;Custom Tool&quot; with the files you wish to work with, you do this with the files properties. Right click on the file in Solution Explorer and select &quot;Properties&quot;. On the files property page add &quot;SharpToolRunner&quot; as the &quot;Custom Tool&quot;.</p>
<p>Note. If there is already an entry from some tool other than SharpToolRunner you <strong><em>probably do not</em></strong> want to replace it. If you do decide to replace it make sure you know what you&#39;re doing, Visual Studio can sometimes be very opaque about what configuration options it sets and it can be difficult getting back to where you started.</p>
<p><img src="./images/FileProperties.png?raw=true" alt="Image">
<img src="https://github.com/gitsharper/sharp-toolrunner/blob/master/Images/FileProperties.png" alt=""></p>
<h3 id="configutation-file-entries">Configutation file entries</h3>
<p>Currently there are several entries in the configuration file.</p>
<h4 id="-less-less-compiler-">.less (less compiler)</h4>
<pre><code class="lang-json">    {
        &quot;Id&quot;: &quot;.less&quot;,
        &quot;OutputExtension&quot;: &quot;css&quot;,
        &quot;Commands&quot;: [
            {
                &quot;ExecutableName&quot;: &quot;cmd.exe&quot;,
                &quot;CmdLine&quot;: [ &quot;/C&quot;, &quot;lessc.cmd&quot;, &quot;-no-color&quot;, &quot;\&quot;$in\&quot;&quot;, &quot;\&quot;$out\&quot;&quot; ]
            }
        ]
    },
</code></pre>
<h4 id="-md-markdown-via-marked-to-html-file-">.md (markdown via marked, to html file)</h4>
<pre><code class="lang-json">    {
        &quot;Id&quot;: &quot;.md&quot;,
        &quot;OutputExtension&quot;: &quot;.html&quot;,
        &quot;Commands&quot;: [
            {
                &quot;ExecutableName&quot;: &quot;cmd.exe&quot;,
                &quot;CmdLine&quot;: [ &quot;/C&quot;, &quot;marked.cmd&quot;, &quot;-i \&quot;$in\&quot;&quot;, &quot;-o \&quot;$out\&quot;&quot; ]
            },
            {
                &quot;ExecutableName&quot;: &quot;internal:replace&quot;,
                &quot;CmdLine&quot;: [ &quot;--content--&quot;, &quot;internal:simple.outer.html&quot; ]
            }
        ]
    }
</code></pre>
<p>This translate markdown (.md) to html. There a several things to note about this entry.</p>
<ul>
<li>It has multiple commands associated with it.</li>
<li>The second command is for an STR internal command named &quot;replace&quot;.</li>
</ul>
<p>The &quot;replace&quot; command takes two arguments, &quot;--content--&quot; which is the simple text to locate within the file referenced by the second argument. This text (&quot;--content--&quot;) will be replaced by the output of the first command (the &quot;marked&quot; translator). The second argument (file name) starts with &quot;internal:&quot; which indicates STR should find it in the &quot;.Assets&quot; folder of the installation directory. If you customize this entry, or better add a configuration higher up the chain and create a new entry, you can add a reference to your own html source file which can be located in the file system. An absolute file name (&quot;c:\files\some-file.html&quot;&quot;) will be searched for as is. A file name or name with a partial path will be searched for relative to the input file&#39;s location.</p>
<h4 id="-ps1-powershell-">.ps1 (powershell)</h4>
<pre><code class="lang-json">    {
        &quot;Id&quot;: &quot;.ps1&quot;,
        &quot;OutputExtension&quot;: &quot;.txt&quot;,
        &quot;Commands&quot;: [
            {
                &quot;ExecutableName&quot;: &quot;powershell.exe&quot;,
                &quot;ReadStdOut&quot;: true,
                &quot;CmdLine&quot;: [ &quot;-noprofile&quot;, &quot;-file&quot;, &quot;\&quot;$in\&quot;&quot; ]
            }
        ]
    },
</code></pre>
<p>Note &quot;ReadStdOut&quot; is set to true;</p>
<h4 id="-btm-jpsoft-s-tcc-and-take-command-processors-">.btm (jpsoft&#39;s &#39;TCC&#39; and &quot;Take Command&quot; processors)</h4>
<pre><code class="lang-json">    {
        &quot;Id&quot;: &quot;.btm&quot;,
        &quot;OutputExtension&quot;: &quot;.txt&quot;,
        &quot;Commands&quot;: [
            {
                &quot;ExecutableName&quot;: &quot;tcc.exe&quot;,
                &quot;ReadStdOut&quot;: true,
                &quot;CmdLine&quot;: [ &quot;/C&quot;, &quot;\&quot;$in\&quot;&quot; ]
            }
        ]
    },
</code></pre>
<h4 id="-ts-typescript-">.ts (typescript)</h4>
<pre><code class="lang-json">    {
        &quot;Id&quot;: &quot;.ts&quot;,
        &quot;note&quot; : &quot;typescript&quot;,
        &quot;Commands&quot;: [
            {
                &quot;ExecutableName&quot;: &quot;cmd.exe&quot;,
                &quot;CmdLine&quot;: [ &quot;/C&quot;, &quot;tsc.cmd&quot;, &quot;--out \&quot;$out\&quot;&quot;, &quot;\&quot;$in\&quot;&quot; ]
            }
        ]
    },
</code></pre>
<h4 id="-nmp4-net-macro-processor-">.nmp4 (Net Macro Processor)</h4>
<pre><code class="lang-json">{
        &quot;Id&quot;: &quot;.nmp4&quot;,
        &quot;OutputExtension&quot;: &quot;&quot;,
        &quot;Commands&quot;: [
            {
                &quot;ExecutableName&quot;: &quot;nmp4host.exe&quot;,
                &quot;CmdLine&quot;: [ &quot;-d:#VSCustomTool=1&quot;, &quot;-out:\&quot;$out\&quot;&quot;, &quot;\&quot;$in\&quot;&quot; ]
            }
        ]
    },
</code></pre>
<p>This is something of my own invention but is unavaiable because of the horrible error tracking and reporting.</p>
<p>The only interesting thing to note here is that &quot;OutputExtension is empty (&quot;&quot;). This is because the macro processor has a convention where the name of the input file name contains the output extension embedded within it, e.g. &quot;translate.txt.nmp4&quot;. The &quot;.nmp4&quot; gets stripped off and we&#39;re left with &quot;translate.txt&quot;.</p>
<h3 id="license">License</h3>
<p><a href="license.txt">Eclipse Public License</a></p>

		</div>    
  </body>
  
</html>